<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>iTest Learning :: Informe</title>
	<link href="css/style.css" rel="stylesheet" type="text/css" />



	<style type="text/css">
#content_popup {
    background:#dcdcdc;
	width: 100%; height:100%; padding-top: 300px; background: black; background: rgba(0, 0, 0, 0.6);top: 0; left: 0; position: absolute; 
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
	-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
}

#mensagem_popup{
  font-family: Times New Roman, sans-serif;
  margin:10px;
  padding:25px 35px 20px 20px;
  font-size: 16pt;
  color: #0000cd; 
}

#fechar{
 color:#0000cd;
 font-size:14pt;
 margin-top:290px;
 margin-left: 130px;
}	
#popup {
	background:#dcdcdc;
	position: absolute;
	left: 50%;
	margin-left: -150px;
	margin-top: -50px;
	padding: 10px;
	width: 650px;
	height: 450px;
	border: 1px solid black;
	min-width: 350px;
	min-height: 250px;
	max-width: 350px;
	max-height: 250px;
	color: #006400;
	font-size: 15px;
	background-color: white;
	-webkit-border-radius: 10px;
	padding: 12px 10px 12px 10px;
	-moz-border-radius: 10px;
}
</style>

	<script type="text/javascript">
		function verificar_pontos(){
			p = #{jogoBean.jogo.pontuacao};
			if (p>=70){ 
				document.getElementById('mensagem_popup').innerHTML = "Parabéns, sua pontuação foi de " +p+ " pontos, portanto você pode passar para a próxima fase.";
			}else{
				document.getElementById('mensagem_popup').innerHTML = "Infelizmente sua pontuação foi de "+p+" pontos, com essa pontuação você não pode ir para a próxima fase";
			}
		}
		function fechar() {
			document.getElementById('content_popup').style.display = 'none';
		}

		function abrir() {
			verificar_pontos();
			document.getElementById('content_popup').style.display = '';
			setTimeout("fechar()", 8000);
		}
	</script>



</h:head>
<body onload="abrir();">
	<f:view>
		<h:form>
			<div id="slider">
				<div id="templatemo_wrapper">
					<div id="header">
						<h1>
							<a href="index.jsf">iTest Learning</a>
						</h1>
					</div>



					<div id="content">
						<div id="buttonsMenu">
							<p:commandLink title="Escopo do Projeto"
								oncomplete="dialogEscopo.show()" update="displayEscopo">
								<p:graphicImage value="images/note.png" width="70" height="70" />
							</p:commandLink>
							<p:commandLink title="Ir para o Ranking"
								oncomplete="ranking.show()" update="ranking">
								<p:graphicImage value="images/ranking.png" width="55"
									height="67" styleClass="campeao" />
							</p:commandLink>
							<p:commandLink title="Terminar Jogo"
								action="#{jogoBean.terminarJogo}" ajax="false">
								<p:graphicImage value="images/stop.png" width="70" height="70" />
							</p:commandLink>

						</div>


						<div id="content_popup">
							<div id="popup">
								<p id="mensagem_popup">
									Se sua pontuação for inferior a 70 pontos, infelizmente você 
									não pode ir para a próxima fase.
									Obrigado.
									<br />
								</p>
								<small id="fechar"><a id="fechar" href="javascript: fechar();">Fechar </a></small>
							</div>
						</div>



						<h2>Resultado</h2>
						<br /> <br />
						<div id="fase" align="center">
							<h2>
								Pontuação:
								<h:outputText value="#{jogoBean.jogo.pontuacao}" />
							</h2>
							<h3>Seu Planejamento</h3>
							<p:dataTable var="item"
								value="#{jogoBean.itemTesteBean.respostas}">
								<p:column>
									<f:facet name="header">
										Itens de Teste
									</f:facet>
									<h:outputText value="#{item.descricao}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.tipoTesteBean.respostas}">
								<p:column>
									<f:facet name="header">
										Tipos de Teste
									</f:facet>
									<h:outputText value="#{item.pk.tipoTeste.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.nivelTesteBean.respostas}">
								<p:column>
									<f:facet name="header">
										Níveis de Teste
									</f:facet>
									<h:outputText value="#{item.pk.nivelTeste.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.criterioAceitacaoBean.respostas}">
								<p:column>
									<f:facet name="header">
										Critérios de Aceitação
									</f:facet>
									<h:outputText value="#{item.descricao}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.ferramentaBean.respostas}">
								<p:column>
									<f:facet name="header">
										Ferramentas
									</f:facet>
									<h:outputText value="#{item.pk.ferramenta.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.artefatoBean.respostas}">
								<p:column>
									<f:facet name="header">
										Artefatos
									</f:facet>
									<h:outputText value="#{item.pk.artefato.nome}" />
								</p:column>
							</p:dataTable>

							<br /> <br /> <br />

							<h3>Planejamento Sugerido</h3>
							<p:dataTable var="item"
								value="#{jogoBean.itemTesteBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Itens de Teste
									</f:facet>
									<h:outputText value="#{item.descricao}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.tipoTesteBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Tipos de Teste
									</f:facet>
									<h:outputText value="#{item.pk.tipoTeste.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.nivelTesteBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Níveis de Teste
									</f:facet>
									<h:outputText value="#{item.pk.nivelTeste.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.criterioAceitacaoBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Critérios de Aceitação
									</f:facet>
									<h:outputText value="#{item.descricao}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.ferramentaBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Ferramentas
									</f:facet>
									<h:outputText value="#{item.pk.ferramenta.nome}" />
								</p:column>
							</p:dataTable>
							<p:dataTable var="item"
								value="#{jogoBean.artefatoBean.respostasCorretas}">
								<p:column>
									<f:facet name="header">
										Artefatos
									</f:facet>
									<h:outputText value="#{item.pk.artefato.nome}" />
								</p:column>
							</p:dataTable>

							<br /> <br />
						</div>


						<p:commandLink title="avançar" style="float: left;" ajax="false" action="objetivoFaseProjeto">
							<p:graphicImage value="images/go.png" styleClass="image_res" />
						</p:commandLink>

						<p:dialog header="Ir para o Ranking" id="ranking"
							widgetVar="ranking">
							<h:outputLabel value="Nome: " />
							<h:inputText value="#{jogoBean.usuario.nome}" />
							<h:commandButton type="submit" value="OK"
								action="#{jogoBean.adicionarRanking}" />
						</p:dialog>
						<p:dialog header="Escopo do Projeto" id="dialogEscopo"
							widgetVar="dialogEscopo">
							<h:panelGrid id="displayEscopo">
								<h4>#{jogoBean.projetoBean.projeto.nome}</h4>
								<h:outputText value="#{jogoBean.projetoBean.projeto.descricao}" />
							</h:panelGrid>
						</p:dialog>
					</div>
					<div id="footer">

						<h:outputLabel>© 2012 Virginia Farias. Todos os direitos reservados.</h:outputLabel>
					</div>
				</div>
			</div>
		</h:form>
	</f:view>
</body>
</html>